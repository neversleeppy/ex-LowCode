(()=>{"use strict";var e={14295:(e,t,n)=>{n(66992),n(88674),n(19601),n(17727);var o=n(49242),r=(n(54415),n(73396)),u={class:"app"};function l(e,t,n,o,l,a){var i=(0,r.up)("Editor");return(0,r.wg)(),(0,r.iD)("div",u,[(0,r.Wm)(i,{modelValue:o.state,"onUpdate:modelValue":t[0]||(t[0]=function(e){return o.state=e}),formData:o.formData},null,8,["modelValue","formData"])])}const a=JSON.parse('{"container":{"width":550,"height":550},"blocks":[{"top":100,"left":100,"zIndex":1,"key":"text","props":{"text":"testText","color":"#ff0000","size":"14px"}},{"top":200,"left":200,"zIndex":1,"key":"button","props":{"text":"testBtn","type":"primary"}},{"top":300,"left":300,"zIndex":1,"key":"input","props":{},"model":{}}]}');var i=n(44870);n(38862),n(21249),n(85827),n(41539),n(47941);const c=(0,r.aZ)({props:{block:{type:Object},component:{type:Object}},setup:function(e){var t=e.component.resize||{},n=t.width,o=t.height,u={},l=function(t){var n=t.clientX,o=t.clientY,r=u,l=r.startX,a=r.startY,i=r.startWidth,c=r.startHeight,s=r.startLeft,d=r.startTop,f=r.direction;"center"==f.horizontal&&(n=l),"center"==f.vertical&&(o=a);var p=n-l,m=o-a;"start"==f.vertical&&(m=-m,e.block.top=d-m),"start"==f.horizontal&&(p=-p,e.block.left=s-p);var v=i+p,b=c+m;e.block.width=v,e.block.height=b,e.block.hasResize=!0},a=function e(){console.log("mouseup"),document.body.removeEventListener("mousemove",l),document.body.removeEventListener("mouseup",e)},i=function(t,n){t.stopPropagation(),u={startX:t.clientX,startY:t.clientY,startWidth:e.block.width,startHeight:e.block.height,startLeft:e.block.left,startTop:e.block.top,direction:n},document.body.addEventListener("mousemove",l),document.body.addEventListener("mouseup",a)};return function(){return(0,r.Wm)(r.HY,null,[n&&(0,r.Wm)(r.HY,null,[(0,r.Wm)("div",{class:"block-resize block-resize-left",onMousedown:function(e){return i(e,{horizontal:"start",vertical:"center"})}},null),(0,r.Wm)("div",{class:"block-resize block-resize-right",onMousedown:function(e){return i(e,{horizontal:"end",vertical:"center"})}},null)]),o&&(0,r.Wm)(r.HY,null,[(0,r.Wm)("div",{class:"block-resize block-resize-top",onMousedown:function(e){return i(e,{horizontal:"center",vertical:"start"})}},null),(0,r.Wm)("div",{class:"block-resize block-resize-bottom",onMousedown:function(e){return i(e,{horizontal:"center",vertical:"end"})}},null)]),n&&o&&(0,r.Wm)(r.HY,null,[(0,r.Wm)("div",{class:"block-resize block-resize-top-left",onMousedown:function(e){return i(e,{horizontal:"start",vertical:"start"})}},null),(0,r.Wm)("div",{class:"block-resize block-resize-top-right",onMousedown:function(e){return i(e,{horizontal:"end",vertical:"start"})}},null),(0,r.Wm)("div",{class:"block-resize block-resize-bottom-left",onMousedown:function(e){return i(e,{horizontal:"start",vertical:"end"})}},null),(0,r.Wm)("div",{class:"block-resize block-resize-bottom-right",onMousedown:function(e){return i(e,{horizontal:"end",vertical:"end"})}},null)])])}}}),s=(0,r.aZ)({props:{block:{type:Object},formData:{type:Object}},setup:function(e){var t=(0,r.Fl)((function(){return{top:"".concat(e.block.top,"px"),left:"".concat(e.block.left,"px"),zIndex:e.block.zIndex}})),n=(0,r.f3)("config"),o=(0,i.iH)(null);return(0,r.bv)((function(){var t=o.value,n=t.offsetWidth,r=t.offsetHeight;e.block.alignCenter&&(e.block.left=e.block.left-n/2,e.block.top=e.block.top-r/2,e.block.alignCenter=!1),e.block.width=n,e.block.height=r})),function(){var u=n.componentMap[e.block.key],l=u.render({size:e.block.hasResize?{width:e.block.width,height:e.block.height}:{},props:e.block.props,model:Object.keys(u.model||{}).reduce((function(t,n){var o=e.block.model[n];return console.log(o),t[n]={modelValue:e.formData[o],"onUpdate:modelValue":function(t){return e.formData[o]=t}},t}),{})}),a=u.resize||{},i=a.width,s=a.height;return(0,r.Wm)("div",{class:"editor-block",style:t.value,ref:o},[l,e.block.focus&&(i||s)&&(0,r.Wm)(c,{block:e.block,component:u},null)])}}});var d=n(62177),f=n.n(d),p=n(89584),m=n(95082),v=(n(92222),n(1373)),b=(0,v.Z)();function h(e,t){var n=null,o=function(e){e.dataTransfer.dropEffect="move"},r=function(e){e.preventDefault()},u=function(e){e.dataTransfer.dropEffect="none"},l=function(e){var o=t.value.blocks;t.value=(0,m.Z)((0,m.Z)({},t.value),{},{blocks:[].concat((0,p.Z)(o),[{top:e.offsetY,left:e.offsetX,zIndex:1,key:n.key,alignCenter:!0,props:{},model:{}}])}),n=null},a=function(t,a){e.value.addEventListener("dragenter",o),e.value.addEventListener("dragover",r),e.value.addEventListener("dragleave",u),e.value.addEventListener("drop",l),n=a,b.emit("start")},i=function(t){e.value.removeEventListener("dragenter",o),e.value.removeEventListener("dragover",r),e.value.removeEventListener("dragleave",u),e.value.removeEventListener("drop",l),b.emit("end")};return{dragstart:a,dragend:i}}n(89554),n(54747);function k(e,t,n){var o=(0,i.iH)(-1),u=(0,r.Fl)((function(){return e.value.blocks[o.value]})),l=(0,r.Fl)((function(){var t=[],n=[];return e.value.blocks.forEach((function(e){return(e.focus?t:n).push(e)})),{focus:t,unfocused:n}})),a=function(){e.value.blocks.forEach((function(e){return e.focus=!1}))},c=function(){t.value||(a(),o.value=-1)},s=function(e,r,u){t.value||(e.preventDefault(),e.stopPropagation(),e.shiftKey?l.value.focus.length<=1?r.focus=!0:r.focus=!r.focus:r.focus||(a(),r.focus=!0),o.value=u,n(e))};return{blockMousedown:s,containerMousedown:c,focusData:l,lastSelectBlock:u,clearBlockFocus:a}}function y(e,t,n){var o={startX:0,startY:0,dragging:!1},r=(0,i.qj)({x:null,y:null}),u=function(r){console.log(t.value);var u=t.value,i=u.width,c=u.height;o={startX:r.clientX,startY:r.clientY,startLeft:t.value.left,startTop:t.value.top,dragging:!1,startPos:e.value.focus.map((function(e){var t=e.top,n=e.left;return{top:t,left:n}})),lines:function(){var t=e.value.unfocused,o={x:[],y:[]};return[].concat((0,p.Z)(t),[{top:0,left:0,width:n.value.container.width,height:n.value.container.height}]).forEach((function(e){var t=e.top,n=e.left,r=e.width,u=e.height;o.y.push({showTop:t,top:t}),o.y.push({showTop:t,top:t-c}),o.y.push({showTop:t+u/2,top:t+u/2-c/2}),o.y.push({showTop:t+u,top:t+u}),o.y.push({showTop:t+u,top:t+u-c}),o.x.push({showLeft:n,left:n}),o.x.push({showLeft:n+r,left:n+r}),o.x.push({showLeft:n+r/2,left:n+r/2-i/2}),o.x.push({showLeft:n+r,left:n+r-i}),o.x.push({showLeft:n,left:n-i})})),o}()},document.addEventListener("mousemove",l),document.addEventListener("mouseup",a)},l=function(t){var n=t.clientX,u=t.clientY;o.dragging||(o.dragging=!0,b.emit("start"));for(var l=n-o.startX+o.startLeft,a=u-o.startY+o.startTop,i=null,c=null,s=0;s<o.lines.y.length;s++){var d=o.lines.y[s],f=d.top,p=d.showTop;if(Math.abs(f-a)<5){i=p,u=o.startY-o.startTop+f;break}}for(var m=0;m<o.lines.x.length;m++){var v=o.lines.x[m],h=v.left,k=v.showLeft;if(Math.abs(h-l)<5){c=k,n=o.startX-o.startLeft+h;break}}r.x=c,r.y=i;var y=n-o.startX,g=u-o.startY;e.value.focus.forEach((function(e,t){e.top=o.startPos[t].top+g,e.left=o.startPos[t].left+y}))},a=function e(t){document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",e),r.x=null,r.y=null,o.dragging&&b.emit("end")};return{mousedown:u,markLine:r}}n(68309),n(47042),n(82772),n(40561),n(69600);function g(e,t){var n={current:-1,queue:[],commands:{},commandArray:[],destroyArray:[]},o=function(e){n.commandArray.push(e),n.commands[e.name]=function(){var t=e.execute.apply(e,arguments),o=t.redo,r=t.undo;if(o(),e.pushQueue){var u=n.queue,l=n.current;u.length>0&&(u=u.slice(0,l+1),n.queue=u),u.push({redo:o,undo:r}),n.current=l+1,console.log(u)}}};o({name:"redo",keyboard:"ctrl+y",execute:function(){return{redo:function(){var e=n.queue[n.current+1];e&&(e.redo&&e.redo(),n.current++)}}}}),o({name:"undo",keyboard:"ctrl+z",execute:function(){return{redo:function(){if(-1!=n.current){var e=n.queue[n.current];e&&(e.undo&&e.undo(),n.current--)}}}}}),o({name:"drag",pushQueue:!0,init:function(){var t=this;this.before=null;var o=function(){t.before=f()(e.value.blocks)},r=function(){n.commands.drag()};return b.on("start",o),b.on("end",r),function(){b.off("start",o),b.off("end",r)}},execute:function(){var t=this.before,n=e.value.blocks;return{redo:function(){e.value=(0,m.Z)((0,m.Z)({},e.value),{},{blocks:n})},undo:function(){e.value=(0,m.Z)((0,m.Z)({},e.value),{},{blocks:t})}}}}),o({name:"updateContainer",pushQueue:!0,execute:function(t){var n={before:e.value,after:t};return{redo:function(){e.value=n.after},undo:function(){e.value=n.before}}}}),o({name:"updateBlock",pushQueue:!0,execute:function(t,n){var o={before:e.value.blocks,after:function(){var o=(0,p.Z)(e.value.blocks),r=e.value.blocks.indexOf(n);return r>-1&&o.splice(r,1,t),o}()};return{redo:function(){e.value=(0,m.Z)((0,m.Z)({},e.value),{},{blocks:o.after})},undo:function(){e.value=(0,m.Z)((0,m.Z)({},e.value),{},{blocks:o.before})}}}}),o({name:"placeTop",pushQueue:!0,execute:function(){var n=f()(e.value.blocks);(function(){var n=t.value,o=n.focus,r=n.unfocused,u=r.reduce((function(e,t){return Math.max(e,t.zIndex)}),-1/0);o.forEach((function(e){return e.zIndex=u+1})),e.value.blocks})();return{undo:function(){e.value=(0,m.Z)((0,m.Z)({},e.value),{},{blocks:n})},redo:function(){}}}}),o({name:"placeBottom",pushQueue:!0,execute:function(){var n=f()(e.value.blocks),o=function(){var n=t.value,o=n.focus,r=n.unfocused,u=r.reduce((function(e,t){return Math.min(e,t.zIndex)}),1/0)-1;if(u<0){var l=Math.abs(u);u=0,r.forEach((function(e){return e.zIndex+=l}))}return o.forEach((function(e){return e.zIndex=u})),e.value.blocks}();return{undo:function(){e.value=(0,m.Z)((0,m.Z)({},e.value),{},{blocks:n})},redo:function(){e.value=(0,m.Z)((0,m.Z)({},e.value),{},{blocks:o})}}}}),o({name:"delete",pushQueue:!0,execute:function(){var n={before:f()(e.value.blocks),after:t.value.unfocused};return{redo:function(){e.value=(0,m.Z)((0,m.Z)({},e.value),{},{blocks:n.after})},undo:function(){e.value=(0,m.Z)((0,m.Z)({},e.value),{},{blocks:n.before})}}}});var u=function(){var e={90:"z",89:"y"},t=function(t){var o=t.ctrlKey,r=t.keyCode,u=[];o&&u.push("ctrl"),e[r],u.push(e[r]),u=u.join("+"),n.commandArray.forEach((function(e){var o=e.keyboard,r=e.name;o&&o===u&&(n.commands[r](),t.preventDefault())}))},o=function(){return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}};return o}();return function(){n.destroyArray.push(u()),n.commandArray.forEach((function(e){return e.init&&n.destroyArray.push(e.init())}))}(),(0,r.Ah)((function(){n.destroyArray.forEach((function(e){return e&&e()}))})),n}var w,W=n(35298),x=n(51976),z=n(76605),D=(0,r.aZ)({props:{option:{type:Object}},setup:function(e,t){var n=(0,i.qj)({option:e.option,isShow:!1});t.expose({showDialog:function(e){n.option=e,n.isShow=!0}});var o=function(){n.isShow=!1},u=function(){n.isShow=!1,n.option.onConfirm&&n.option.onConfirm(n.option.content)};return function(){return(0,r.Wm)(W.d0,{modelValue:n.isShow,"onUpdate:modelValue":function(e){return n.isShow=e},title:n.option.title},{default:function(){return(0,r.Wm)(x.EZ,{type:"textarea",modelValue:n.option.content,"onUpdate:modelValue":function(e){return n.option.content=e},rows:10},null)},footer:function(){return n.option.footer&&(0,r.Wm)("div",null,[(0,r.Wm)(z.mi,{onClick:o},{default:function(){return[(0,r.Uk)("取消")]}}),(0,r.Wm)(z.mi,{type:"primary",onClick:u},{default:function(){return[(0,r.Uk)("确定")]}})])}})}}});function Z(e){if(!w){var t=document.createElement("div");w=(0,r.Wm)(D,{option:e}),document.body.appendChild(((0,o.sY)(w,t),t))}var n=w.component.exposed.showDialog;n(e)}var C,E=(0,r.aZ)({props:{label:String,icon:String},setup:function(e,t){var n=e.label,o=e.icon,u=(0,r.f3)("hide");return function(){return(0,r.Wm)("div",{class:"dropdown-item",onClick:u},[(0,r.Wm)("i",{class:o},null),(0,r.Wm)("span",null,[n])])}}}),V=(0,r.aZ)({props:{option:{type:Object}},setup:function(e,t){var n=(0,i.qj)({option:e.option,isShow:!1,top:0,left:0});t.expose({showDropdown:function(e){n.option=e,n.isShow=!0;var t=e.el.getBoundingClientRect(),o=t.top,r=t.left,u=t.height;n.top=o+u,n.left=r}}),(0,r.JJ)("hide",(function(){return n.isShow=!1}));var o=(0,r.Fl)((function(){return["dropdown",{"dropdown-isShow":n.isShow}]})),u=(0,r.Fl)((function(){return{top:n.top+"px",left:n.left+"px"}})),l=(0,i.iH)(null),a=function(e){l.value.contains(e.target)||(n.isShow=!1)};return(0,r.bv)((function(){document.body.addEventListener("mousedown",a,!0)})),(0,r.Jd)((function(){document.body.removeEventListener("mousedown",a)})),function(){return(0,r.Wm)("div",{class:o.value,style:u.value,ref:l},[n.option.content()])}}});function O(e){if(!C){var t=document.createElement("div");C=(0,r.Wm)(V,{option:e}),document.body.appendChild(((0,o.sY)(C,t),t))}var n=C.component.exposed.showDropdown;n(e)}var L,j=n(56084),U=(n(69720),n(22058)),S=n(55097),Y=n(80635),H=n(50438),M=n(59971),T=n(28061),B=(0,r.aZ)({props:{option:{type:Object}},setup:function(e,t){var n=(0,i.qj)({option:e.option,isShow:!1,editData:[]}),o={show:function(e){n.option=e,n.isShow=!0,n.editData=f()(e.data)}},u=function(){n.editData.push({})},l=function(){n.isShow=!1},a=function(){n.option.onConfirm(n.editData),l()};return t.expose(o),function(){return(0,r.Wm)(W.d0,{modelValue:n.isShow,"onUpdate:modelValue":function(e){return n.isShow=e},title:n.option.config.label},{default:function(){return(0,r.Wm)("div",null,[(0,r.Wm)("div",null,[(0,r.Wm)(z.mi,{onClick:u},{default:function(){return[(0,r.Uk)("添加")]}}),(0,r.Wm)(z.mi,null,{default:function(){return[(0,r.Uk)("重置")]}})]),(0,r.Wm)(T.eI,{data:n.editData},{default:function(){return[(0,r.Wm)(T.$Y,{type:"index"},null),n.option.config.table.options.map((function(e,t){return(0,r.Wm)(T.$Y,{label:e.label},{default:function(t){var n=t.row;return(0,r.Wm)(x.EZ,{modelValue:n[e.field],"onUpdate:modelValue":function(t){return n[e.field]=t}},null)}})})),(0,r.Wm)(T.$Y,{label:"操作"},{default:function(){return[(0,r.Wm)(z.mi,{type:"danger"},{default:function(){return[(0,r.Uk)("删除")]}})]}})]}})])},footer:function(){return(0,r.Wm)(r.HY,null,[(0,r.Wm)(z.mi,{onClick:l},{default:function(){return[(0,r.Uk)("取消")]}}),(0,r.Wm)(z.mi,{onClick:a},{default:function(){return[(0,r.Uk)("确定")]}})])}})}}}),F=function(e){if(!L){var t=document.createElement("div");L=(0,r.Wm)(B,{option:e});(0,o.sY)(L,t);document.body.appendChild(t)}var n=L.component.exposed.show;n(e)};const J=(0,r.aZ)({props:{propConfig:{type:Object},modelValue:{type:Array}},emits:["update:modelValue"],setup:function(e,t){var n=(0,r.Fl)({get:function(){return e.modelValue||[]},set:function(e){t.emit("update:modelValue",f()(e))}}),o=function(){F({config:e.propConfig,data:n.value,onConfirm:function(e){n.value=e}})};return function(){return(0,r.Wm)("div",null,[(!n.value||0==n.value.length)&&(0,r.Wm)(z.mi,{onClick:o},{default:function(){return[(0,r.Uk)("添加")]}}),(n.value||[]).map((function(t){return(0,r.Wm)(M.Ks,{onClick:o},{default:function(){return[t[e.propConfig.table.key]]}})}))])}}});function A(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,r.lA)(e)}const I=(0,r.aZ)({props:{block:{type:Object},data:{type:Object},updateContainer:{type:Function},updateBlock:{type:Function}},setup:function(e,t){var n=(0,r.f3)("config"),o=(0,i.qj)({editData:{}}),u=function(){e.block?o.editData=f()(e.block):o.editData=f()(e.data.container)};(0,r.YP)((function(){return e.block}),u,{immediate:!0});var l=function(){e.block?e.updateBlock(o.editData,e.block):e.updateContainer((0,m.Z)((0,m.Z)({},e.data),{},{container:o.editData}))};return function(){var t=[];if(e.block){var a=n.componentMap[e.block.key];a&&a.props&&t.push(Object.entries(a.props).map((function(e){var t,n=(0,j.Z)(e,2),u=n[0],l=n[1];return(0,r.Wm)(U.nH,{label:l.label},A(t={input:function(){return(0,r.Wm)(x.EZ,{modelValue:o.editData.props[u],"onUpdate:modelValue":function(e){return o.editData.props[u]=e}},null)},color:function(){return(0,r.Wm)(Y.$,{modelValue:o.editData.props[u],"onUpdate:modelValue":function(e){return o.editData.props[u]=e}},null)},select:function(){var e;return(0,r.Wm)(H.km,{modelValue:o.editData.props[u],"onUpdate:modelValue":function(e){return o.editData.props[u]=e}},A(e=l.options.map((function(e){return(0,r.Wm)(H.BT,{label:e.label,value:e.value},null)})))?e:{default:function(){return[e]}})},table:function(){return(0,r.Wm)(J,{propConfig:l,modelValue:o.editData.props[u],"onUpdate:modelValue":function(e){return o.editData.props[u]=e}},null)}}[l.type]())?t:{default:function(){return[t]}})}))),a&&a.model&&t.push(Object.entries(a.model).map((function(e){var t=(0,j.Z)(e,2),n=t[0],u=t[1];return(0,r.Wm)(U.nH,{label:u},{default:function(){return[(0,r.Wm)(x.EZ,{modelValue:o.editData.model[n],"onUpdate:modelValue":function(e){return o.editData.model[n]=e}},null)]}})})))}else t.push((0,r.Wm)(r.HY,null,[(0,r.Wm)(U.nH,{label:"容器宽度"},{default:function(){return[(0,r.Wm)(S.d6,{modelValue:o.editData.width,"onUpdate:modelValue":function(e){return o.editData.width=e}},null)]}}),(0,r.Wm)(U.nH,{label:"容器高度"},{default:function(){return[(0,r.Wm)(S.d6,{modelValue:o.editData.height,"onUpdate:modelValue":function(e){return o.editData.height=e}},null)]}})]));return(0,r.Wm)(U.ly,{labelPosition:"top",style:"padding:30px"},{default:function(){return[t,(0,r.Wm)(U.nH,null,{default:function(){return[(0,r.Wm)(z.mi,{type:"primary",onClick:function(){return l()}},{default:function(){return[(0,r.Uk)("应用")]}}),(0,r.Wm)(z.mi,{onClick:u},{default:function(){return[(0,r.Uk)("重置")]}})]}})]}})}}}),X=(0,r.aZ)({props:{modelValue:{type:Object},formData:{type:Object}},emits:["update:modelValue"],setup:function(e,t){var n=(0,i.iH)(!0),o=(0,i.iH)(!0),u=(0,r.Fl)({get:function(){return e.modelValue},set:function(e){t.emit("update:modelValue",f()(e))}}),l=(0,r.Fl)((function(){return{width:u.value.container.width+"px",height:u.value.container.height+"px"}})),a=(0,r.f3)("config"),c=(0,i.iH)(null),d=h(c,u),p=d.dragstart,m=d.dragend,v=k(u,n,(function(e){V(e)})),b=v.blockMousedown,w=v.focusData,W=v.containerMousedown,x=v.lastSelectBlock,D=v.clearBlockFocus,C=y(w,x,u),V=C.mousedown,L=C.markLine,j=g(u,w),U=j.commands,S=[{label:"撤销",icon:"icon-back",handler:function(){return U.undo()}},{label:"重做",icon:"icon-forward",handler:function(){return U.redo()}},{label:"导出",icon:"icon-export",handler:function(){Z({title:"导出JSON",content:JSON.stringify(u.value)})}},{label:"导入",icon:"icon-import",handler:function(){Z({title:"导入JSON使用",content:"",footer:!0,onConfirm:function(e){U.updateContainer(JSON.parse(e))}})}},{label:"置顶",icon:"icon-place-top",handler:function(){return U.placeTop()}},{label:"置底",icon:"icon-place-bottom",handler:function(){return U.placeBottom()}},{label:"删除",icon:"icon-delete",handler:function(){return U["delete"]()}},{label:function(){return n.value?"编辑":"预览"},icon:function(){return n.value?"icon-edit":"icon-browse"},handler:function(){n.value=!n.value,D()}},{label:"关闭",icon:"icon-close",handler:function(){o.value=!1,D()}}],Y=function(e,t){e.preventDefault(),O({el:e.target,content:function(){return(0,r.Wm)(r.HY,null,[(0,r.Wm)(E,{label:"删除",icon:"icon-delete",onClick:function(){console.log("删除"),U["delete"]()}},null),(0,r.Wm)(E,{label:"置顶",icon:"icon-place-top",onClick:function(){return U.placeTop()}},null),(0,r.Wm)(E,{label:"置底",icon:"icon-place-bottom",onClick:function(){return U.placeBottom()}},null),(0,r.Wm)(E,{label:"查看",icon:"icon-browse",onClick:function(){Z({title:"查看节点数据",content:JSON.stringify(t)})}},null),(0,r.Wm)(E,{label:"导入",icon:"icon-import",onClick:function(){Z({title:"导入节点数据",content:"",footer:!0,onConfirm:function(e){e=JSON.parse(e),U.updateBlock(e,t)}})}},null)])}})};return function(){return o.value?(0,r.Wm)("div",{class:"editor"},[(0,r.Wm)("div",{class:"editor-left"},[a.componentList.map((function(e){return(0,r.Wm)("div",{class:"editor-left-item",draggable:!0,onDragstart:function(t){return p(t,e)},onDragend:m},[(0,r.Wm)("span",null,[e.label]),(0,r.Wm)("div",null,[e.preview()])])}))]),(0,r.Wm)("div",{class:"editor-top"},[S.map((function(e,t){var n="function"==typeof e.icon?e.icon():e.icon,o="function"==typeof e.label?e.label():e.label;return(0,r.Wm)("div",{class:"editor-top-button",onClick:e.handler},[(0,r.Wm)("i",{class:n},null),(0,r.Wm)("span",null,[o])])}))]),(0,r.Wm)("div",{class:"editor-right"},[(0,r.Wm)(I,{block:x.value,data:u.value,updateContainer:U.updateContainer,updateBlock:U.updateBlock},null)]),(0,r.Wm)("div",{class:"editor-container"},[(0,r.Wm)("div",{class:"editor-container-canvas"},[(0,r.Wm)("div",{class:"editor-container-canvas__content",style:l.value,ref:c,onMouseDown:W},[u.value.blocks.map((function(t,o){return(0,r.Wm)(s,{class:[t.focus?"editor-block-focus":"",n.value?"editor-block-preview":""],block:t,onMousedown:function(e){return b(e,t,o)},onContextmenu:function(e){return Y(e,t)},formData:e.formData},null)})),null!==L.x&&(0,r.Wm)("div",{class:"line-x",style:{left:L.x+"px"}},null),null!==L.y&&(0,r.Wm)("div",{class:"line-y",style:{top:L.y+"px"}},null)])])])]):(0,r.Wm)(r.HY,null,[(0,r.Wm)("div",{class:"editor-container-canvas__content",style:l.value},[u.value.blocks.map((function(t,n){return(0,r.Wm)(s,{class:"editor-block-preview",block:t,formData:e.formData},null)}))]),(0,r.Wm)("div",null,[(0,r.Wm)(z.mi,{type:"primary",onClick:function(){return o.value=!0}},{default:function(){return[(0,r.Uk)("继续编辑")]}}),JSON.stringify(e.formData)])])}}});n(9653);const q=(0,r.aZ)({props:{start:{type:Number},end:{type:Number}},emits:["update:start","update:end"],setup:function(e,t){var n=(0,r.Fl)({get:function(){return e.start},set:function(e){t.emit("update:start",e)}}),u=(0,r.Fl)({get:function(){return e.end},set:function(e){t.emit("update:end",e)}});return function(){return(0,r.Wm)("div",{class:"range"},[(0,r.wy)((0,r.Wm)("input",{type:"text","onUpdate:modelValue":function(e){return n.value=e}},null),[[o.nr,n.value]]),(0,r.Wm)("span",null,[(0,r.Uk)("~")]),(0,r.wy)((0,r.Wm)("input",{type:"text","onUpdate:modelValue":function(e){return u.value=e}},null),[[o.nr,u.value]])])}}});function N(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,r.lA)(e)}function P(){var e=[],t={};return{componentList:e,componentMap:t,register:function(n){e.push(n),t[n.key]=n}}}var _=P(),Q=function(e){return{type:"input",label:e}},$=function(e){return{type:"color",label:e}},K=function(e,t){return{type:"select",label:e,options:t}},R=function(e,t){return{type:"table",label:e,table:t}};_.register({label:"下拉框",preview:function(){return(0,r.Wm)(H.km,{modelValue:""},null)},render:function(e){var t,n=e.props,o=e.model;return(0,r.Wm)(H.km,o["default"],N(t=(n.options||[]).map((function(e,t){return(0,r.Wm)(H.BT,{label:e.label,value:e.value,key:t},null)})))?t:{default:function(){return[t]}})},key:"select",props:{options:R("下拉选项",{options:[{label:"显示值",field:"label"},{label:"绑定值",field:"value"}],key:"label"})},model:{default:"绑定字段"}}),_.register({label:"文本",preview:function(){return"预览文本"},render:function(e){var t,n=e.props;return(0,r.Wm)("span",{style:{color:n.color,fontSize:n.size}},[null!==(t=n.text)&&void 0!==t?t:"渲染文本"])},key:"text",props:{text:Q("文本内容"),color:$("字体颜色"),size:K("字体大小",[{label:"14px",value:"14px"},{label:"20px",value:"20px"},{label:"24px",value:"24px"}])}}),_.register({label:"按钮",resize:{width:!0,height:!0},preview:function(){return(0,r.Wm)(z.mi,null,{default:function(){return[(0,r.Uk)("预览按钮")]}})},render:function(e){var t,n=e.props,o=e.size;return(0,r.Wm)(z.mi,{style:{height:o.height+"px",width:o.width+"px"},type:n.type,size:n.size},{default:function(){return[(0,r.Uk)(" "),null!==(t=n.text)&&void 0!==t?t:"渲染按钮"]}})},key:"button",props:{text:Q("按钮内容"),type:K("按钮类型",[{label:"基础",value:"primary"},{label:"成功",value:"success"},{label:"警告",value:"warning"},{label:"危险",value:"danger"},{label:"文本",value:"text"}]),size:K("按钮尺寸",[{label:"默认",value:""},{label:"中等",value:"medium"},{label:"小",value:"small"},{label:"极小",value:"mini"}])}}),_.register({label:"输入框",resize:{width:!0},preview:function(){return(0,r.Wm)(x.EZ,{placeholder:"预览输入框"},null)},render:function(e){var t=e.model,n=e.size;return(0,r.Wm)(x.EZ,(0,r.dG)({placeholder:"渲染输入框"},t["default"],{style:{width:n.width+"px"}}),null)},key:"input",model:{default:"绑定字段"}}),_.register({label:"范围选择器",preview:function(){return(0,r.Wm)(q,{placeholder:"预览输入框"},null)},render:function(e){var t=e.model;return console.log(t),(0,r.Wm)(q,{start:t.start.modelValue,end:t.end.modelValue,"onUpdate:start":t.start["onUpdate:modelValue"],"onUpdate:end":t.end["onUpdate:modelValue"]},null)},model:{start:"开始范围字段",end:"结束范围字段"},key:"range"});const G={components:{Editor:X},setup:function(){var e=(0,i.iH)(a);(0,r.JJ)("config",_);var t=(0,i.iH)({username:"xiaoming",password:123,start:0,end:100});return{state:e,formData:t}}};var ee=n(40089);const te=(0,ee.Z)(G,[["render",l]]),ne=te;(0,o.ri)(ne).mount("#app")}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var u=t[o]={exports:{}};return e[o].call(u.exports,u,u.exports,n),u.exports}n.m=e,(()=>{var e=[];n.O=(t,o,r,u)=>{if(!o){var l=1/0;for(s=0;s<e.length;s++){for(var[o,r,u]=e[s],a=!0,i=0;i<o.length;i++)(!1&u||l>=u)&&Object.keys(n.O).every((e=>n.O[e](o[i])))?o.splice(i--,1):(a=!1,u<l&&(l=u));if(a){e.splice(s--,1);var c=r();void 0!==c&&(t=c)}}return t}u=u||0;for(var s=e.length;s>0&&e[s-1][2]>u;s--)e[s]=e[s-1];e[s]=[o,r,u]}})(),(()=>{n.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return n.d(t,{a:t}),t}})(),(()=>{n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={143:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var r,u,[l,a,i]=o,c=0;if(l.some((t=>0!==e[t]))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(i)var s=i(n)}for(t&&t(o);c<l.length;c++)u=l[c],n.o(e,u)&&e[u]&&e[u][0](),e[u]=0;return n.O(s)},o=self["webpackChunkvue_lowcode"]=self["webpackChunkvue_lowcode"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=n.O(void 0,[998],(()=>n(14295)));o=n.O(o)})();
//# sourceMappingURL=app.4ae8edb7.js.map